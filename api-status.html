<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>API Status - HOPSiEdev Portfolio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .glass-border {
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.02);
        }

        .glass-card {
            border: 1px solid rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.03);
        }

        .status-online {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: #22c55e;
        }

        .status-offline {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
            color: #f59e0b;
        }

        .status-loading {
            background: rgba(107, 114, 128, 0.1);
            border-color: rgba(107, 114, 128, 0.3);
            color: #6b7280;
        }

        .pulse-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .slide-up {
            animation: slideUp 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        .delay-100 {
            animation-delay: 0.1s;
        }

        .delay-200 {
            animation-delay: 0.2s;
        }

        .delay-300 {
            animation-delay: 0.3s;
        }

        .delay-400 {
            animation-delay: 0.4s;
        }

        .delay-500 {
            animation-delay: 0.5s;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .animate-on-scroll.in-view {
            opacity: 1;
            transform: translateY(0);
        }

        .response-time-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .response-time-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .response-fast {
            background: #22c55e;
        }

        .response-medium {
            background: #f59e0b;
        }

        .response-slow {
            background: #ef4444;
        }
    </style>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body class="bg-black text-gray-100 font-sans antialiased">
    <!-- Navbar -->
    <header class="fixed w-full z-50 glass-border fade-in">
        <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div
                    class="w-6 h-6 bg-violet-500 bg-[url(https://images.unsplash.com/photo-1636690581110-a512fed05fd3?w=1080&q=80)] bg-cover rounded-md">
                </div>
                <span class="font-medium text-white-400">HOPSiEdev</span>
            </div>
            <nav class="flex items-center gap-8 text-sm text-gray-600">
                <a href="index.html" class="hover:text-white transition-colors">Portfolio</a>
                <a href="tools.html" class="hover:text-white transition-colors">Tools</a>
                <a href="api-status.html" class="text-white">API Status</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="pt-24 pb-12 px-6">
        <div class="max-w-4xl mx-auto text-center">
            <div class="flex items-center justify-center gap-3 mb-6 slide-up delay-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="w-8 h-8 text-violet-400">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" />
                </svg>
                <h1 class="text-4xl font-medium text-violet-400">API Status Monitor</h1>
            </div>
            <p class="text-gray-400 text-lg mb-8 slide-up delay-400">
                Estado en tiempo real de las APIs y servicios utilizados en el portfolio
            </p>

            <!-- Overall Status -->
            <div class="glass-card p-6 rounded-xl mb-8 slide-up delay-600">
                <div class="flex items-center justify-center gap-4">
                    <div class="flex items-center gap-2">
                        <div id="overall-status-dot" class="w-3 h-3 rounded-full pulse-dot status-loading"></div>
                        <span id="overall-status-text" class="text-lg font-medium">Verificando servicios...</span>
                    </div>
                    <div class="text-sm text-gray-400">
                        Última actualización: <span id="last-update">--:--</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Status -->
    <section class="pb-24 px-6">
        <div class="max-w-4xl mx-auto">
            <div class="grid gap-6" id="services-container">
                <!-- Services will be populated by JavaScript -->
            </div>

            <!-- Refresh Button -->
            <div class="text-center mt-12">
                <button id="refresh-btn"
                    class="glass-border hover:bg-white/5 transition-all flex items-center gap-2 text-sm font-medium bg-gray-700 rounded-lg px-6 py-3 mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="w-4 h-4">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
                        <path d="M21 3v5h-5" />
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
                        <path d="M3 21v-5h5" />
                    </svg>
                    Actualizar Estado
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center bg-neutral-950 pt-8 pb-8">
        <div class="w-full h-px bg-gradient-to-r from-transparent via-gray-800 to-transparent mb-8"></div>
        <p class="text-sm text-gray-500">© 2025 HOPSiEdev - API Status Monitor</p>
    </footer>

    <script>
        // Services configuration
        const services = [
            {
                name: 'EmailJS',
                description: 'Servicio de envío de emails del formulario de contacto',
                url: 'https://api.emailjs.com/api/v1.0/email/send',
                method: 'OPTIONS',
                category: 'Communication'
            },
            {
                name: 'GitHub API',
                description: 'API para mostrar repositorios y información de perfil',
                url: 'https://api.github.com/users/hopsiedev',
                method: 'GET',
                category: 'Development'
            },
            {
                name: 'Unsplash API',
                description: 'Servicio de imágenes utilizado en el portfolio',
                url: 'https://images.unsplash.com/photo-1636690581110-a512fed05fd3?w=100&q=80',
                method: 'GET',
                category: 'Media'
            },
            {
                name: 'Tailwind CDN',
                description: 'CDN de Tailwind CSS para estilos del portfolio',
                url: 'https://cdn.tailwindcss.com',
                method: 'GET',
                category: 'Assets'
            },
            {
                name: 'Lucide Icons',
                description: 'CDN de iconos utilizados en la interfaz',
                url: 'https://unpkg.com/lucide@latest/dist/umd/lucide.js',
                method: 'GET',
                category: 'Assets'
            },
            {
                name: 'Google Fonts',
                description: 'Fuentes tipográficas del portfolio',
                url: 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap',
                method: 'GET',
                category: 'Assets'
            }
        ];

        let serviceStatuses = {};

        // Initialize Lucide icons
        lucide.createIcons();

        // Check service status
        async function checkServiceStatus(service) {
            const startTime = Date.now();

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                const response = await fetch(service.url, {
                    method: service.method,
                    mode: 'no-cors', // Para evitar problemas de CORS
                    signal: controller.signal
                });

                clearTimeout(timeoutId);
                const responseTime = Date.now() - startTime;

                return {
                    status: 'online',
                    responseTime: responseTime,
                    message: 'Servicio operativo'
                };
            } catch (error) {
                const responseTime = Date.now() - startTime;

                if (error.name === 'AbortError') {
                    return {
                        status: 'offline',
                        responseTime: responseTime,
                        message: 'Timeout - Sin respuesta'
                    };
                }

                // Para requests no-cors, asumimos que está online si no hay error de red
                if (error.message.includes('Failed to fetch')) {
                    return {
                        status: 'offline',
                        responseTime: responseTime,
                        message: 'Error de conexión'
                    };
                }

                return {
                    status: 'online',
                    responseTime: responseTime,
                    message: 'Servicio operativo (CORS limitado)'
                };
            }
        }

        // Get response time class
        function getResponseTimeClass(responseTime) {
            if (responseTime < 500) return 'response-fast';
            if (responseTime < 2000) return 'response-medium';
            return 'response-slow';
        }

        // Get response time width
        function getResponseTimeWidth(responseTime) {
            const maxTime = 3000;
            return Math.min((responseTime / maxTime) * 100, 100);
        }

        // Create service card HTML
        function createServiceCard(service, status) {
            const statusClass = status ? `status-${status.status}` : 'status-loading';
            const responseTimeClass = status ? getResponseTimeClass(status.responseTime) : '';
            const responseTimeWidth = status ? getResponseTimeWidth(status.responseTime) : 0;

            return `
        <div class="glass-card p-6 rounded-xl animate-on-scroll">
          <div class="flex items-start justify-between mb-4">
            <div class="flex-1">
              <div class="flex items-center gap-3 mb-2">
                <div class="w-3 h-3 rounded-full ${statusClass} ${status ? '' : 'pulse-dot'}"></div>
                <h3 class="font-medium text-white">${service.name}</h3>
                <span class="text-xs px-2 py-1 rounded-md glass-border text-gray-400">${service.category}</span>
              </div>
              <p class="text-sm text-gray-400 mb-3">${service.description}</p>
              
              ${status ? `
                <div class="flex items-center gap-4 text-xs text-gray-500">
                  <span>Estado: <span class="${statusClass}">${status.message}</span></span>
                  <span>Tiempo: ${status.responseTime}ms</span>
                </div>
                <div class="response-time-bar mt-2">
                  <div class="response-time-fill ${responseTimeClass}" style="width: ${responseTimeWidth}%"></div>
                </div>
              ` : `
                <div class="text-xs text-gray-500">Verificando...</div>
              `}
            </div>
            
            <div class="ml-4">
              ${status && status.status === 'online' ? `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-green-400">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <path d="M9 11l3 3L22 4"/>
                </svg>
              ` : status && status.status === 'offline' ? `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-red-400">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M15 9l-6 6"/>
                  <path d="M9 9l6 6"/>
                </svg>
              ` : `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-gray-400 animate-spin">
                  <path d="M21 12a9 9 0 11-6.219-8.56"/>
                </svg>
              `}
            </div>
          </div>
        </div>
      `;
        }

        // Update overall status
        function updateOverallStatus() {
            const statusDot = document.getElementById('overall-status-dot');
            const statusText = document.getElementById('overall-status-text');

            const statuses = Object.values(serviceStatuses);
            if (statuses.length === 0) return;

            const onlineCount = statuses.filter(s => s.status === 'online').length;
            const totalCount = statuses.length;

            if (onlineCount === totalCount) {
                statusDot.className = 'w-3 h-3 rounded-full status-online pulse-dot';
                statusText.textContent = `Todos los servicios operativos (${onlineCount}/${totalCount})`;
            } else if (onlineCount === 0) {
                statusDot.className = 'w-3 h-3 rounded-full status-offline pulse-dot';
                statusText.textContent = `Servicios no disponibles (${onlineCount}/${totalCount})`;
            } else {
                statusDot.className = 'w-3 h-3 rounded-full status-warning pulse-dot';
                statusText.textContent = `Servicios parcialmente operativos (${onlineCount}/${totalCount})`;
            }
        }

        // Check all services
        async function checkAllServices() {
            const container = document.getElementById('services-container');
            const refreshBtn = document.getElementById('refresh-btn');

            // Reset statuses
            serviceStatuses = {};

            // Show loading state
            container.innerHTML = services.map(service => createServiceCard(service, null)).join('');
            refreshBtn.disabled = true;
            refreshBtn.querySelector('svg').classList.add('animate-spin');

            // Check each service
            for (const service of services) {
                try {
                    const status = await checkServiceStatus(service);
                    serviceStatuses[service.name] = status;

                    // Update the specific service card
                    const serviceIndex = services.findIndex(s => s.name === service.name);
                    const serviceCards = container.children;
                    if (serviceCards[serviceIndex]) {
                        serviceCards[serviceIndex].outerHTML = createServiceCard(service, status);
                    }

                    updateOverallStatus();
                } catch (error) {
                    console.error(`Error checking ${service.name}:`, error);
                    serviceStatuses[service.name] = {
                        status: 'offline',
                        responseTime: 0,
                        message: 'Error de verificación'
                    };
                }
            }

            // Update last update time
            document.getElementById('last-update').textContent = new Date().toLocaleTimeString('es-ES');

            // Re-enable refresh button
            refreshBtn.disabled = false;
            refreshBtn.querySelector('svg').classList.remove('animate-spin');

            // Re-initialize scroll animations
            initScrollAnimations();
        }

        // Initialize scroll animations
        function initScrollAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.animate-on-scroll').forEach((el) => {
                observer.observe(el);
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            checkAllServices();

            // Refresh button event
            document.getElementById('refresh-btn').addEventListener('click', checkAllServices);

            // Auto-refresh every 5 minutes
            setInterval(checkAllServices, 5 * 60 * 1000);

            // Initialize scroll animations
            initScrollAnimations();
        });
    </script>

</body>

</html>